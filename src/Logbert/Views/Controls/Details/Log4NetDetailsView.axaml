<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:Logbert.ViewModels.Controls.Details"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="400"
             x:Class="Logbert.Views.Controls.Details.Log4NetDetailsView"
             x:DataType="vm:Log4NetDetailsViewModel">

    <!-- Simple table-like layout matching old WinForms Message Details style -->
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="4">
            <!-- Logger Row -->
            <Grid ColumnDefinitions="100,*,Auto" Background="White">
                <TextBlock Grid.Column="0" Text="Logger" FontWeight="Bold" Padding="8,6" Background="#F5F5F5" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="1" Text="{Binding Logger}" Padding="8,6" TextWrapping="Wrap" VerticalAlignment="Center"/>
                <Button Grid.Column="2" Padding="4,2" Background="Transparent" BorderThickness="0" ToolTip.Tip="Copy">
                    <PathIcon Data="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" Width="12" Height="12"/>
                </Button>
            </Grid>
            <Separator Height="1" Background="#E0E0E0"/>

            <!-- Level Row -->
            <Grid ColumnDefinitions="100,*,Auto" Background="White">
                <TextBlock Grid.Column="0" Text="Level" FontWeight="Bold" Padding="8,6" Background="#F5F5F5" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="1" Text="{Binding Level}" Padding="8,6" VerticalAlignment="Center" Foreground="{Binding LevelBackground}"/>
                <Button Grid.Column="2" Padding="4,2" Background="Transparent" BorderThickness="0" ToolTip.Tip="Copy">
                    <PathIcon Data="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" Width="12" Height="12"/>
                </Button>
            </Grid>
            <Separator Height="1" Background="#E0E0E0"/>

            <!-- Date and Time Row -->
            <Grid ColumnDefinitions="100,*,Auto" Background="White">
                <TextBlock Grid.Column="0" Text="Date and Time" FontWeight="Bold" Padding="8,6" Background="#F5F5F5" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="1" Text="{Binding FormattedTimestamp}" Padding="8,6" VerticalAlignment="Center"/>
                <Button Grid.Column="2" Padding="4,2" Background="Transparent" BorderThickness="0" ToolTip.Tip="Copy">
                    <PathIcon Data="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" Width="12" Height="12"/>
                </Button>
            </Grid>
            <Separator Height="1" Background="#E0E0E0"/>

            <!-- Thread Row -->
            <Grid ColumnDefinitions="100,*,Auto" Background="White">
                <TextBlock Grid.Column="0" Text="Thread" FontWeight="Bold" Padding="8,6" Background="#F5F5F5" VerticalAlignment="Center"/>
                <TextBlock Grid.Column="1" Text="{Binding Thread}" Padding="8,6" VerticalAlignment="Center"/>
                <Button Grid.Column="2" Padding="4,2" Background="Transparent" BorderThickness="0" ToolTip.Tip="Copy">
                    <PathIcon Data="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" Width="12" Height="12"/>
                </Button>
            </Grid>
            <Separator Height="1" Background="#E0E0E0"/>

            <!-- Message Row -->
            <Grid ColumnDefinitions="100,*,Auto" Background="White">
                <TextBlock Grid.Column="0" Text="Message" FontWeight="Bold" Padding="8,6" Background="#F5F5F5" VerticalAlignment="Top"/>
                <TextBlock Grid.Column="1" Text="{Binding MessageText}" Padding="8,6" TextWrapping="Wrap" VerticalAlignment="Top"/>
                <Button Grid.Column="2" Padding="4,2" Background="Transparent" BorderThickness="0" ToolTip.Tip="Copy" VerticalAlignment="Top">
                    <PathIcon Data="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" Width="12" Height="12"/>
                </Button>
            </Grid>
            <Separator Height="1" Background="#E0E0E0"/>

            <!-- Location Row -->
            <Grid ColumnDefinitions="100,*,Auto" Background="White" IsVisible="{Binding HasLocation}">
                <TextBlock Grid.Column="0" Text="Location" FontWeight="Bold" Padding="8,6" Background="#F5F5F5" VerticalAlignment="Top"/>
                <StackPanel Grid.Column="1" Margin="8,6">
                    <TextBlock Text="{Binding ClassName}" TextWrapping="Wrap" IsVisible="{Binding ClassName, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                    <TextBlock Text="{Binding MethodName}" TextWrapping="Wrap" IsVisible="{Binding MethodName, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                    <TextBlock Text="{Binding FileName}" TextWrapping="Wrap" Foreground="#666666" IsVisible="{Binding FileName, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
                </StackPanel>
                <Button Grid.Column="2" Padding="4,2" Background="Transparent" BorderThickness="0" ToolTip.Tip="Copy" VerticalAlignment="Top">
                    <PathIcon Data="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" Width="12" Height="12"/>
                </Button>
            </Grid>
            <Separator Height="1" Background="#E0E0E0" IsVisible="{Binding HasLocation}"/>

            <!-- Properties Row -->
            <Grid ColumnDefinitions="100,*,Auto" Background="White" IsVisible="{Binding HasCustomProperties}">
                <TextBlock Grid.Column="0" Text="Properties" FontWeight="Bold" Padding="8,6" Background="#F5F5F5" VerticalAlignment="Top"/>
                <ItemsControl Grid.Column="1" ItemsSource="{Binding CustomProperties}" Margin="8,6">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock>
                                <Run Text="{Binding Key}" FontWeight="SemiBold"/>
                                <Run Text=": "/>
                                <Run Text="{Binding Value}"/>
                            </TextBlock>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
                <Button Grid.Column="2" Padding="4,2" Background="Transparent" BorderThickness="0" ToolTip.Tip="Copy" VerticalAlignment="Top">
                    <PathIcon Data="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" Width="12" Height="12"/>
                </Button>
            </Grid>
        </StackPanel>
    </ScrollViewer>
</UserControl>
